<?xml version="1.0" encoding="UTF-8"?>
<project name="DMDirc-versioning" default="default" basedir=".">
    <description>Adds automatic versioning information to DMDirc</description>

    <available file="${git.dir}" property="is.git"/>

    <target name="-init-version">
        <taskdef name="git-describe" classname="org.mdonoughe.JGitDescribeTask" classpathref="lib.classpath"/>
    </target>

    <target name="-add-version" depends="-init-version, -add-git-version" />

    <target name="-add-git-version" if="is.git">
       <git-describe dir="${git.dir}" property="parsers.version.main" subdir="${basedir}/${src.dir}/com/dmdirc/parser/common/;${basedir}/${src.dir}/com/dmdirc/parser/interfaces/" />
       <git-describe dir="${git.dir}" property="parsers.version.irc" subdir="${basedir}/${src.dir}/com/dmdirc/parser/irc/" />
    </target>

</project>
